<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publications</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.svg">
    <link rel="stylesheet" href="Website.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        /* Add this CSS */
        .back-to-top {
            position: fixed;
            top: 40px; /* Position it 20px from the top */
            left: 50%; /* Position it in the center horizontally */
            transform: translateX(-50%); /* Adjust the position to truly center it */
            display: none;
            width: 50px;
            height: 50px;
            background-color: #bdb8b8;
            color: black;
            text-align: center;
            line-height: 50px;
            font-size: 30px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
        }

        .back-to-top:hover {
            background-color: rgb(162, 162, 213);
        }
    </style>

    <script>

        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('publications-container');
        
            publications.forEach(pub => {
            const pubElement = document.createElement('div');
            pubElement.classList.add('publication');
            pubElement.innerHTML = `
                <div class="publication-title"><a href="${pub.doiLink}" target="_blank">${pub.title}</a></div>
                <div class="publication-authors">${pub.authors}</div>
            `;
            container.appendChild(pubElement);
            });
        });

        fetch("publications.json")
        .then(response => response.json())
        .then(data => displayPublicationsGroupedByYear(data))
        .catch(error => console.error('Error loading the publications:', error));

        function displayPublicationsGroupedByYear(publications) {
        const publicationsContainer = document.getElementById('publications-container');
        publicationsContainer.innerHTML = ''; // Clear previous content

        // Group publications by year
        const publicationsByYear = publications.reduce((acc, pub) => {
            const year = pub.publication_date.substring(0, 4); // Extract year from publication_date
            if (!acc[year]) {
            acc[year] = [];
            }
            acc[year].push(pub);
            return acc;
        }, {});

        // Sort years in descending order and display publications for each year

        Object.keys(publicationsByYear).sort((a, b) => b - a).forEach(year => {
            const yearSection = document.createElement('section');
            yearSection.innerHTML = `
                <div style="color: white;">
                    <h2>${year}</h2>
                </div>`;

            // Sort publications within the year by date
            publicationsByYear[year].sort((a, b) => new Date(b.publication_date) - new Date(a.publication_date)).forEach(pub => {
                const publicationElement = document.createElement('div');
                publicationElement.className = 'publication';

                let imageElement = '';
                if (pub.image && pub.image !== 'default') {
                    imageElement = `<a href="${pub.doi}" target="_blank">
                                    <img src="${pub.image}" alt="Cover image for ${pub.title}" class="publication-image">
                                    </a>`;
                }

                publicationElement.innerHTML = `
                    <div class="publication-box" style="opacity: 0.8;">
                        <div class="publication-title"><a href="${pub.doi}" target="_blank">${pub.title}</a></div>
                        <div class="publication-details" style="text-align: center;">
                            <i><b>${pub.publication_name}</b>, ${year}, ${pub.page_number}</i>
                            <p></p>
                        </div>
                        <div class="publication-authors">${pub.authors.join(', ') || 'Not listed'}</div>
                        <p></p>
                        ${imageElement}
                    </div>
                `;
                yearSection.appendChild(publicationElement);
            });

            publicationsContainer.appendChild(yearSection);
        });
        
    }
    </script>




</head>
<body class="pub-background fade-in-background">
    
    <header class="title-class">
        <img src="images/Larrosa.png" alt="Logo" class="header-logo">
        <img src="images/Manchester_logo.png" alt="Logo" class="man-logo"> 
    </header>
    <nav>
        <div class="menu-toggle">
            <i class="fas fa-bars"></i>
        </div>
        <div class="nav-links">
            <a href="home.html">Home</a>
            <a href="about_igor.html">Igor Larrosa</a>
            <a href="our_team.html">Our Team</a>
            <div class="dropdown">
                <a class="dropbtn">Research Areas</a>
                <div class="dropdown-content">
                    <a href="RuAqua.html">RuAqua</a>
                    <a href="CHActivation.html">C-H Activation</a>
                    <a href="DeCarbox.html">Decarboxylative Functionalisation</a>
                    <a href="AI.html">AI for Mechanistic Elucidation</a>
                    <a href="Bio.html">Integrated Catalysis</a>
                </div>
            </div>            
            <a href="publications.html">Publications</a>
            <div class="dropdown">
                <a class="dropbtn">Resources</a>
                <div class="dropdown-content">
                    <a href="General_Resources.html">General Resources</a>
                    <a href="Presentations.html">Group Presentations</a>
                    <a href="Problems.html">Problems</a>
                </div>
            </div>
            <a href="opportunities.html">Opportunities</a>
        </div>
    </nav>


    <header>
        <h1> Publications </h1>
    </header>
    
    <div id="publications-container"></div>

    <div class="back-to-top" id="back-to-top">&uArr;</div>

    <div style="background-color: lightgrey; transform: translateY(30px); text-align: center; justify-content: center;">
        <a href=mailto:luke.nichols28@hotmail.com style="color: black; text-decoration: none;"> Copyright Â© 2024 by Luke M. Nichols.</a>
    </div>


    <script>
        const backToTopButton = document.getElementById('back-to-top');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        });

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
    <script src="Webiste.js"></script>

    
</body>
</html>
